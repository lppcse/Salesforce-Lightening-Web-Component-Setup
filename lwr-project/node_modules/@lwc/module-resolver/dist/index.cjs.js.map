{"version":3,"file":"index.cjs.js","sources":["../src/errors.ts","../src/shared.ts","../src/utils.ts","../src/types.ts","../src/resolve-module.ts"],"sourcesContent":["/*\n * Copyright (c) 2018, salesforce.com, inc.\n * All rights reserved.\n * SPDX-License-Identifier: MIT\n * For full license text, see the LICENSE file in the repo root or https://opensource.org/licenses/MIT\n */\nexport class NoLwcModuleFound extends Error {\n    constructor(importee, importer) {\n        super(`Unable to resolve \"${importee}\" from \"${importer}\"`);\n        this.code = 'NO_LWC_MODULE_FOUND';\n    }\n}\nexport class LwcConfigError extends Error {\n    constructor(message, { scope }) {\n        super(`Invalid LWC configuration in \"${scope}\". ${message}`);\n        this.code = 'LWC_CONFIG_ERROR';\n        this.scope = scope;\n    }\n}\n//# sourceMappingURL=errors.js.map","/*\n * Copyright (c) 2018, salesforce.com, inc.\n * All rights reserved.\n * SPDX-License-Identifier: MIT\n * For full license text, see the LICENSE file in the repo root or https://opensource.org/licenses/MIT\n */\nexport function isObject(obj) {\n    return typeof obj === 'object';\n}\n//# sourceMappingURL=shared.js.map","/*\n * Copyright (c) 2018, salesforce.com, inc.\n * All rights reserved.\n * SPDX-License-Identifier: MIT\n * For full license text, see the LICENSE file in the repo root or https://opensource.org/licenses/MIT\n */\nimport path from 'path';\nimport fs from 'fs';\nimport { LwcConfigError } from './errors';\nimport { isObject } from './shared';\nconst PACKAGE_JSON = 'package.json';\nconst LWC_CONFIG_FILE = 'lwc.config.json';\nexport function isNpmModuleRecord(moduleRecord) {\n    return 'npm' in moduleRecord;\n}\nexport function isDirModuleRecord(moduleRecord) {\n    return 'dir' in moduleRecord;\n}\nexport function isAliasModuleRecord(moduleRecord) {\n    return 'name' in moduleRecord && 'path' in moduleRecord;\n}\nfunction getEntry(moduleDir, moduleName, ext) {\n    return path.join(moduleDir, `${moduleName}.${ext}`);\n}\nexport function getModuleEntry(moduleDir, moduleName, opts) {\n    const entryJS = getEntry(moduleDir, moduleName, 'js');\n    const entryTS = getEntry(moduleDir, moduleName, 'ts');\n    const entryHTML = getEntry(moduleDir, moduleName, 'html');\n    const entryCSS = getEntry(moduleDir, moduleName, 'css');\n    // Order is important\n    if (fs.existsSync(entryJS)) {\n        return entryJS;\n    }\n    else if (fs.existsSync(entryTS)) {\n        return entryTS;\n    }\n    else if (fs.existsSync(entryHTML)) {\n        return entryHTML;\n    }\n    else if (fs.existsSync(entryCSS)) {\n        return entryCSS;\n    }\n    throw new LwcConfigError(`Unable to find a valid entry point for \"${moduleDir}/${moduleName}\"`, { scope: opts.rootDir });\n}\nexport function normalizeConfig(config, scope) {\n    const rootDir = config.rootDir ? path.resolve(config.rootDir) : process.cwd();\n    const modules = config.modules || [];\n    const normalizedModules = modules.map((m) => {\n        if (!isObject(m)) {\n            throw new LwcConfigError(`Invalid module record. Module record must be an object, instead got ${JSON.stringify(m)}.`, { scope });\n        }\n        return isDirModuleRecord(m) ? Object.assign(Object.assign({}, m), { dir: path.resolve(rootDir, m.dir) }) : m;\n    });\n    return {\n        modules: normalizedModules,\n        rootDir,\n    };\n}\nfunction normalizeDirName(dirName) {\n    return dirName.endsWith('/') ? dirName : `${dirName}/`;\n}\n// User defined modules will have precedence over the ones defined elsewhere (ex. npm)\nexport function mergeModules(userModules, configModules = []) {\n    const visitedAlias = new Set();\n    const visitedDirs = new Set();\n    const visitedNpm = new Set();\n    const modules = userModules.slice();\n    // Visit the user modules to created an index with the name as keys\n    userModules.forEach((m) => {\n        if (isAliasModuleRecord(m)) {\n            visitedAlias.add(m.name);\n        }\n        else if (isDirModuleRecord(m)) {\n            visitedDirs.add(normalizeDirName(m.dir));\n        }\n        else if (isNpmModuleRecord(m)) {\n            visitedNpm.add(m.npm);\n        }\n    });\n    configModules.forEach((m) => {\n        if ((isAliasModuleRecord(m) && !visitedAlias.has(m.name)) ||\n            (isDirModuleRecord(m) && !visitedDirs.has(normalizeDirName(m.dir))) ||\n            (isNpmModuleRecord(m) && !visitedNpm.has(m.npm))) {\n            modules.push(m);\n        }\n    });\n    return modules;\n}\nexport function findFirstUpwardConfigPath(dirname) {\n    const parts = dirname.split(path.sep);\n    while (parts.length > 1) {\n        const upwardsPath = parts.join(path.sep);\n        const pkgJsonPath = path.join(upwardsPath, PACKAGE_JSON);\n        const configJsonPath = path.join(upwardsPath, LWC_CONFIG_FILE);\n        const dirHasPkgJson = fs.existsSync(pkgJsonPath);\n        const dirHasLwcConfig = fs.existsSync(configJsonPath);\n        if (dirHasLwcConfig && !dirHasPkgJson) {\n            throw new LwcConfigError(`\"lwc.config.json\" must be at the package root level along with the \"package.json\"`, { scope: upwardsPath });\n        }\n        if (dirHasPkgJson) {\n            return path.dirname(pkgJsonPath);\n        }\n        parts.pop();\n    }\n    throw new LwcConfigError(`Unable to find any LWC configuration file`, { scope: dirname });\n}\nexport function validateNpmConfig(config, opts) {\n    if (!config.modules) {\n        throw new LwcConfigError('Missing \"modules\" property for a npm config', {\n            scope: opts.rootDir,\n        });\n    }\n    if (!config.expose) {\n        throw new LwcConfigError('Missing \"expose\" attribute: An imported npm package must explicitly define all the modules that it contains', { scope: opts.rootDir });\n    }\n}\nexport function validateNpmAlias(exposed, map, opts) {\n    Object.keys(map).forEach((specifier) => {\n        if (!exposed.includes(specifier)) {\n            throw new LwcConfigError(`Unable to apply mapping: The specifier \"${specifier}\" is not exposed by the npm module`, { scope: opts.rootDir });\n        }\n    });\n}\nexport function getLwcConfig(dirname) {\n    var _a;\n    const packageJsonPath = path.resolve(dirname, PACKAGE_JSON);\n    const lwcConfigPath = path.resolve(dirname, LWC_CONFIG_FILE);\n    if (fs.existsSync(lwcConfigPath)) {\n        return require(lwcConfigPath);\n    }\n    else {\n        return (_a = require(packageJsonPath).lwc) !== null && _a !== void 0 ? _a : {};\n    }\n}\nexport function createRegistryEntry(entry, specifier, type, opts) {\n    return {\n        entry,\n        specifier,\n        type,\n        scope: opts.rootDir,\n    };\n}\nexport function remapList(exposed, map) {\n    return exposed.reduce((renamed, item) => {\n        renamed.push(map[item] || item);\n        return renamed;\n    }, []);\n}\nexport function transposeObject(map) {\n    return Object.entries(map).reduce((r, [key, value]) => ((r[value] = key), r), {});\n}\n//# sourceMappingURL=utils.js.map","/*\n * Copyright (c) 2018, salesforce.com, inc.\n * All rights reserved.\n * SPDX-License-Identifier: MIT\n * For full license text, see the LICENSE file in the repo root or https://opensource.org/licenses/MIT\n */\nexport var RegistryType;\n(function (RegistryType) {\n    RegistryType[\"alias\"] = \"alias\";\n    RegistryType[\"dir\"] = \"dir\";\n})(RegistryType || (RegistryType = {}));\n//# sourceMappingURL=types.js.map","/*\n * Copyright (c) 2018, salesforce.com, inc.\n * All rights reserved.\n * SPDX-License-Identifier: MIT\n * For full license text, see the LICENSE file in the repo root or https://opensource.org/licenses/MIT\n */\nimport fs from 'fs';\nimport path from 'path';\nimport resolve from 'resolve';\nimport { createRegistryEntry, findFirstUpwardConfigPath, isAliasModuleRecord, isDirModuleRecord, isNpmModuleRecord, getLwcConfig, getModuleEntry, normalizeConfig, validateNpmConfig, mergeModules, remapList, transposeObject, validateNpmAlias, } from './utils';\nimport { NoLwcModuleFound, LwcConfigError } from './errors';\nimport { RegistryType, } from './types';\nfunction resolveModuleFromAlias(specifier, moduleRecord, opts) {\n    const { name, path: modulePath } = moduleRecord;\n    if (specifier !== name) {\n        return;\n    }\n    const entry = path.resolve(opts.rootDir, modulePath);\n    if (!fs.existsSync(entry)) {\n        throw new LwcConfigError(`Invalid alias module record \"${JSON.stringify(moduleRecord)}\", file \"${entry}\" does not exist`, { scope: opts.rootDir });\n    }\n    return createRegistryEntry(entry, specifier, RegistryType.alias, opts);\n}\nfunction resolveModuleFromDir(specifier, moduleRecord, opts) {\n    const { dir } = moduleRecord;\n    const absModuleDir = path.isAbsolute(dir) ? dir : path.join(opts.rootDir, dir);\n    if (!fs.existsSync(absModuleDir)) {\n        throw new LwcConfigError(`Invalid dir module record \"${JSON.stringify(moduleRecord)}\", directory ${absModuleDir} doesn't exists`, { scope: opts.rootDir });\n    }\n    // A module dir record can only resolve module specifier with the following form \"[ns]/[name]\".\n    // We can early exit if the required specifier doesn't match.\n    const parts = specifier.split('/');\n    if (parts.length !== 2) {\n        return;\n    }\n    const [ns, name] = parts;\n    const moduleDir = path.join(absModuleDir, ns, name);\n    // Exit if the expected module directory doesn't exists.\n    if (!fs.existsSync(moduleDir)) {\n        return;\n    }\n    const entry = getModuleEntry(moduleDir, name, opts);\n    return createRegistryEntry(entry, specifier, RegistryType.dir, opts);\n}\nfunction resolveModuleFromNpm(specifier, npmModuleRecord, opts) {\n    const { npm, map: aliasMapping } = npmModuleRecord;\n    let pkgJsonPath;\n    try {\n        pkgJsonPath = resolve.sync(`${npm}/package.json`, {\n            basedir: opts.rootDir,\n            preserveSymlinks: true,\n        });\n    }\n    catch (error) {\n        // If the module \"package.json\" can't be found, throw an an invalid config error. Otherwise\n        // rethrow the original error.\n        if (error.code === 'MODULE_NOT_FOUND') {\n            throw new LwcConfigError(`Invalid npm module record \"${JSON.stringify(npmModuleRecord)}\", \"${npm}\" npm module can't be resolved`, { scope: opts.rootDir });\n        }\n        throw error;\n    }\n    const packageDir = path.dirname(pkgJsonPath);\n    const lwcConfig = getLwcConfig(packageDir);\n    validateNpmConfig(lwcConfig, { rootDir: packageDir });\n    let exposedModules = lwcConfig.expose;\n    let reverseMapping;\n    if (aliasMapping) {\n        validateNpmAlias(lwcConfig.expose, aliasMapping, { rootDir: packageDir });\n        exposedModules = remapList(lwcConfig.expose, aliasMapping);\n        reverseMapping = transposeObject(aliasMapping);\n    }\n    if (exposedModules.includes(specifier)) {\n        for (const moduleRecord of lwcConfig.modules) {\n            const aliasedSpecifier = reverseMapping && reverseMapping[specifier];\n            const registryEntry = resolveModuleRecordType(aliasedSpecifier || specifier, moduleRecord, {\n                rootDir: packageDir,\n            });\n            if (registryEntry) {\n                if (aliasedSpecifier) {\n                    registryEntry.specifier = specifier;\n                    registryEntry.type = RegistryType.alias;\n                }\n                return registryEntry;\n            }\n        }\n        throw new LwcConfigError(`Unable to find \"${specifier}\" under npm package \"${npmModuleRecord.npm}\"`, { scope: packageDir });\n    }\n}\nfunction resolveModuleRecordType(specifier, moduleRecord, opts) {\n    const { rootDir } = opts;\n    if (isAliasModuleRecord(moduleRecord)) {\n        return resolveModuleFromAlias(specifier, moduleRecord, { rootDir });\n    }\n    else if (isDirModuleRecord(moduleRecord)) {\n        return resolveModuleFromDir(specifier, moduleRecord, { rootDir });\n    }\n    else if (isNpmModuleRecord(moduleRecord)) {\n        return resolveModuleFromNpm(specifier, moduleRecord, opts);\n    }\n    throw new LwcConfigError(`Unknown module record \"${JSON.stringify(moduleRecord)}\"`, {\n        scope: rootDir,\n    });\n}\nexport function resolveModule(importee, dirname, config) {\n    if (typeof importee !== 'string') {\n        throw new TypeError(`The importee argument must be a string. Received type ${typeof importee}`);\n    }\n    if (typeof dirname !== 'string') {\n        throw new TypeError(`The dirname argument must be a string. Received type ${typeof dirname}`);\n    }\n    if (importee.startsWith('.') || importee.startsWith('/')) {\n        throw new TypeError(`The importee argument must be a valid LWC module name. Received \"${importee}\"`);\n    }\n    const rootDir = findFirstUpwardConfigPath(path.resolve(dirname));\n    const lwcConfig = getLwcConfig(rootDir);\n    let modules = lwcConfig.modules || [];\n    if (config) {\n        const userConfig = normalizeConfig(config, rootDir);\n        modules = mergeModules(userConfig.modules, modules);\n    }\n    for (const moduleRecord of modules) {\n        const registryEntry = resolveModuleRecordType(importee, moduleRecord, { rootDir });\n        if (registryEntry) {\n            return registryEntry;\n        }\n    }\n    throw new NoLwcModuleFound(importee, dirname);\n}\n//# sourceMappingURL=resolve-module.js.map"],"names":["RegistryType"],"mappings":"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"}